(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{27:function(e,t,a){e.exports=a(48)},32:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),c=a.n(l),m=a(6),o=a(1),s=(a(32),a(33),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-menu"},r.a.createElement(m.c,{to:"/",exact:!0,className:"navbar-item is-tab",activeClassName:"is-active"},"Home"),r.a.createElement(m.c,{to:"/people",className:"navbar-item is-tab",activeClassName:"is-active"},"People"))))}),u=function(){return r.a.createElement("h1",{className:"title"},"Home Page")},i=a(7),d=a(26),h=a.n(d),b=a(9),p=function(e){var t=e.name,a=e.sex,n=e.slug,l=Object(o.i)().url,c=Object(o.h)().search;return r.a.createElement(m.b,{to:{pathname:"".concat(l,"/").concat(n),search:c},style:{color:"m"===a?"blue":"red"}},t)};p.defaultProps={name:"",slug:"",sex:""};var f=function(e){var t=e.name,a=e.sex,n=e.born,l=e.died,c=e.fatherName,m=e.motherName,s=e.slug,u=e.father,i=e.mother,d=Object(o.h)().pathname;return r.a.createElement("tr",{name:s,className:"".concat(d.includes(s)&&"is-selected")},r.a.createElement("td",null,r.a.createElement(p,{name:t,sex:a,slug:s})),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement(p,{name:c,sex:"m",slug:u?u.slug:""})),r.a.createElement("td",null,r.a.createElement(p,{name:m,sex:"f",slug:i?i.slug:""})))};f.defaultProps={father:"",mother:""};var E=a(17),v=a(13),N=r.a.memo((function(e){var t=e.people,a=e.setPeople,l=e.setVisibleForm,c=Object(n.useState)([]),m=Object(i.a)(c,2),o=m[0],s=m[1],u=Object(n.useState)({name:"",sex:"",born:0,died:0,fatherName:"",motherName:""}),d=Object(i.a)(u,2),h=d[0],p=d[1],f=(new Date).getFullYear(),N=/\D/,g=t.filter((function(e){return"m"===e.sex&&+e.born+18<h.born&&+e.died>h.born})),j=t.filter((function(e){return"f"===e.sex&&+e.born+18<h.born&&+e.died>h.born})),O=function(e){var t=e.target,a=t.name,n=t.value;p(Object(b.a)(Object(b.a)({},h),{},Object(v.a)({},a,n)))},y=function(e){s(o.filter((function(t){return t!==e})))},x=function(e){s([].concat(Object(E.a)(o),[e]))},C=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":return N.test(n)&&!n.trim().includes(" ")||!n?void x(a):void y(a);case"born":return+n<1400||+n>f?void x(a):void y(a);case"died":if(+n-+h.born>150||n<+h.born)return void x(a);y(a)}};return r.a.createElement("div",{className:"card"},r.a.createElement("form",{className:"form"},r.a.createElement("input",{className:"input is-primary",type:"text",name:"name",placeholder:"Enter full name...",value:h.name,onChange:O,onBlur:C}),o.includes("name")&&r.a.createElement("p",{className:"help is-danger"},"Name should contain only letters and spaces"),r.a.createElement("div",{className:"control",name:"radio"},r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"sex",value:"male",onChange:O}),"Male"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"sex",value:"female",onChange:O}),"Female")),r.a.createElement("input",{className:"input is-small",type:"number",name:"born",placeholder:"Person born",value:h.born||"",onChange:O,onBlur:C,disabled:!h.name||o.includes("name")}),o.includes("born")&&r.a.createElement("p",{className:"help is-danger"},"Born year must be more then 1400 and less"," ",f),r.a.createElement("input",{className:"input is-small",type:"number",name:"died",placeholder:"Person died",value:h.died||"",onChange:O,onBlur:C,disabled:!h.born||o.includes("born")}),o.includes("died")&&r.a.createElement("p",{className:"help is-danger"},"Death year must be greater than the date of birth and the age must be less than 150 years"),r.a.createElement("div",{className:"select is-small"},r.a.createElement("select",{name:"fatherName",value:h.fatherName,onChange:O},r.a.createElement("option",{value:""},"Select Father"),g.map((function(e){return r.a.createElement("option",{value:e.name,key:e.slug},e.name)})))),r.a.createElement("div",{className:"select is-small"},r.a.createElement("select",{name:"motherName",value:h.motherName,onChange:O},r.a.createElement("option",{value:""},"Select Mother"),j.map((function(e){return r.a.createElement("option",{value:e.name,key:e.slug},e.name)})))),r.a.createElement("button",{type:"submit",className:"button is-link",disabled:!Object.values(h).every((function(e){return e})),onClick:function(e){e.preventDefault();var n={name:h.name,sex:h.sex,born:h.born,died:h.died,fatherName:h.fatherName,motherName:h.motherName,slug:"".concat(h.name.toLowerCase().trim().split(" ").join("-"),"-").concat(h.born),father:g.find((function(e){return e.name===h.fatherName})),motherr:j.find((function(e){return e.name===h.motherName}))};a([].concat(Object(E.a)(t),[n])),l(!1),p({name:"",sex:"",born:0,died:0,fatherName:"",motherName:""})}},"Add")))})),g=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),m=Object(i.a)(c,2),s=m[0],u=m[1],d=Object(o.g)(),p=Object(n.useState)(!1),E=Object(i.a)(p,2),v=E[0],g=E[1],j=Object(o.h)(),O=new URLSearchParams(j.search),y=O.get("query")||"",x=Object(n.useState)(y),C=Object(i.a)(x,2),k=C[0],P=C[1];Object(n.useEffect)((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then((function(e){return e.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{mother:e.find((function(e){return t.motherName===e.name?e.name:""})),father:e.find((function(e){return t.fatherName===e.name?e.name:""}))})}))})).then(l)}),[]);var S=Object(n.useCallback)(h()((function(e){e?O.set("query",e):O.delete("query"),d.push({search:O.toString()})}),500),[]),F=Object(n.useMemo)((function(){return y.trim().length?a.filter((function(e){return(e.name+e.fatherName+e.motherName).toLowerCase().includes(y.toLowerCase())})):a}),[y,a]),w=function(e){O.set("sortBy",e),O.delete("sortOrder"),e!==s?(O.set("sortOrder","asc"),F.sort((function(t,a){return["sex","name"].includes(e)?t[e].localeCompare(a[e]):+t[e]-+a[e]})),u(e)):(O.set("sortOrder","desc"),F.reverse(),u("")),d.push({search:O.toString()})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"People Page"),r.a.createElement("div",{className:"input-block"},r.a.createElement("input",{value:k,onChange:function(e){return t=e.target.value,S(t),void P(t);var t},className:"input",type:"text",placeholder:"Find..."})),v&&r.a.createElement(N,{people:a,setPeople:l,setVisibleForm:g}),!v&&r.a.createElement("button",{type:"button",className:"button is-success is-rounded",onClick:function(){return g(!0)}},"Add person"),r.a.createElement("table",{className:"table"},F.length>0&&r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:function(){return w("name")}},"Name"),r.a.createElement("th",{onClick:function(){return w("sex")}},"Sex"),r.a.createElement("th",{onClick:function(){return w("born")}},"Born"),r.a.createElement("th",{onClick:function(){return w("died")}},"Died"),r.a.createElement("th",null,"Father"),r.a.createElement("th",null,"Mother"))),r.a.createElement("tbody",null,F.map((function(e){return r.a.createElement(f,e)})))))},j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/people",component:g}),r.a.createElement(o.b,{path:"/",exact:!0,component:u}),r.a.createElement(o.a,{path:"/home",to:"/"}),r.a.createElement("h2",{className:"subtitle"},"Not Found Page")))};c.a.render(r.a.createElement(m.a,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.923b485b.chunk.js.map